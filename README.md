# SpringBoot-MyBatisCache-Redis
【示例】使用redis作为mybatis的二级缓存

#####1. 本工程是springBoot整合mybatis的样例，并使用redis作为mybatis的二级缓存。由于mybatis中默认自带的二级缓存无法实现分布式缓存，所以采用了redis作为二级缓存。
#####2. 这里插入、修改、删除操作不触发缓存，只有查询的时候，会根据key去redis里面查，若查到null，则去mysql里面查，并插入到redis缓存中，之后的操作会从redis里面查。
#####3. 根据2的场景，会存在数据不能及时同步的问题。如果修改或删除某个数据时，mysql里面已经变更了，但redis里面还是旧数据。我们可以在向redis添加数据时，设置过期时间，比如设置1秒（根据业务需求）。这样在高并发环境下，有效的减轻了mysql的压力，还能使数据误差控制在1秒之内。若有的业务场景读多写少，可以适当延长过期时间。
#####4. 根据3的问题，我们也可以手动操作缓存，既可以设置一个比较长的过期时间，又能保证数据的同步。比如在高并发环境下，添加数据时，首先插入到redis中，并设置一个比较长的过期时间（比如24小时），然后再使用消息队列把数据异步插入到mysql中。修改、删除也是先操作redis，再操作mysql。查询的话，先去redis里面查，若查不到（说明数据过期了），再去mysql里面查，并添加到redis中。这样的话，我们的数据交互主要通过redis，而mysql只是备份的功能。但要注意短时间的数据量，若非常大的话，redis可能会承受不住，可以减少过期时间，或者增加redis集群。
#####5. 总之，要根据业务场景，调整redis数据的过期时间，以及存储策略。
